
<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#000000">
    <title>ูพูู ูุฏุฑุช - ุณุฑูุณ ฺฏููฺฏ</title>
    <link href="https://cdn.jsdelivr.net/gh/rastikerdar/vazirmatn@v33.003/Vazirmatn-font-face.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/lipis/flag-icons@7.2.3/css/flag-icons.min.css">
    <link rel="stylesheet" href="/assets/css/theme.css">
</head>
<body>
    <div class="container">
        <header class="header">
            <img src="/images/logo.jpg" alt="Logo" class="header-logo">
            <h1 class="header-title">ูพูู ูุฏุฑุช</h1>
            <p class="header-subtitle">ูุฏุฑุช ฺฉุดูุฑูุง ู ุงุนูุงูุงุช</p>
        </header>

        <section id="admin-panel" class="admin-panel">
            <div class="admin-header">
                <h2 class="section-title">
                    <span>โ๏ธ</span>
                    <span>ูพูู ูุฏุฑุช</span>
                </h2>
                <div style="display: flex; gap: 12px;">
                    <a href="/" class="btn btn-ghost">ุจุงุฒฺฏุดุช ุจู ุตูุญู ุงุตู</a>
                    <button id="logout-btn" class="btn btn-ghost">ุฎุฑูุฌ</button>
                </div>
            </div>

            <div class="admin-content">
                <div class="admin-section">
                    <h3 class="section-subtitle">ูุถุนุช ุณุณุชู</h3>
                    <div class="system-status">
                        <div class="status-item">
                            <div class="status-header">
                                <span class="status-label">๐ฆ ูพุงฺฏุงู ุฏุงุฏู KV</span>
                                <span id="kv-status-badge" class="status-badge status-loading">ุฏุฑ ุญุงู ุจุฑุฑุณ...</span>
                            </div>
                            <p id="kv-status-message" class="status-message">ุฏุฑ ุญุงู ุงุชุตุงู...</p>
                        </div>
                        <div class="status-item">
                            <div class="status-header">
                                <span class="status-label">๐ค ุชูฺฉู ุฑุจุงุช ุชูฺฏุฑุงู</span>
                                <span id="bot-status-badge" class="status-badge status-loading">ุฏุฑ ุญุงู ุจุฑุฑุณ...</span>
                            </div>
                            <p id="bot-status-message" class="status-message">ุฏุฑ ุญุงู ุงุชุตุงู...</p>
                        </div>
                    </div>
                </div>

                <div class="admin-section">
                    <h3 class="section-subtitle">ุงูุฒูุฏู ฺฉุดูุฑ ุฌุฏุฏ</h3>
                    
                    <div class="input-group">
                        <label class="input-label">ฺฉุฏ ISO ฺฉุดูุฑ (ูุซุงู: IR)</label>
                        <input type="text" id="admin-country-id" class="input-field" placeholder="IR" maxlength="2">
                        <small style="color: var(--text-tertiary); font-size: var(--font-size-xs); margin-top: 4px; display: block;">
                            ฺฉุฏ ุฏู ุญุฑู ฺฉุดูุฑ - ูพุฑฺู ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ ุชุดุฎุต ุฏุงุฏู ูโุดูุฏ
                        </small>
                    </div>

                    <div class="input-group">
                        <label class="input-label">ูุงู ฺฉุดูุฑ (ูุงุฑุณ)</label>
                        <input type="text" id="admin-country-name" class="input-field" placeholder="ุงุฑุงู">
                    </div>

                    <div class="input-group">
                        <label class="input-label">ูุงู ฺฉุดูุฑ (ุงูฺฏูุณ)</label>
                        <input type="text" id="admin-country-name-en" class="input-field" placeholder="Iran">
                    </div>

                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px;">
                        <div class="input-group">
                            <label class="input-label">ุขุฏุฑุณโูุง DNS IPv4</label>
                            <small style="color: var(--text-tertiary); font-size: var(--font-size-xs); display: block; margin-bottom: 8px;">
                                ูุฑ ุฎุท ฺฉ ุขุฏุฑุณ - ุขุฏุฑุณโูุง ุชฺฉุฑุงุฑ ุฎูุฏฺฉุงุฑ ุญุฐู ูโุดููุฏ
                            </small>
                            <textarea id="admin-dns-ipv4" class="input-field" rows="6" placeholder="1.1.1.1&#10;8.8.8.8&#10;9.9.9.9"></textarea>
                        </div>

                        <div class="input-group">
                            <label class="input-label">ุขุฏุฑุณโูุง DNS IPv6</label>
                            <small style="color: var(--text-tertiary); font-size: var(--text-size-xs); display: block; margin-bottom: 8px;">
                                ูุฑ ุฎุท ฺฉ ุขุฏุฑุณ - ุขุฏุฑุณโูุง ุชฺฉุฑุงุฑ ุฎูุฏฺฉุงุฑ ุญุฐู ูโุดููุฏ
                            </small>
                            <textarea id="admin-dns-ipv6" class="input-field" rows="6" placeholder="2606:4700:4700::1111&#10;2001:4860:4860::8888"></textarea>
                        </div>
                    </div>

                    <button id="add-country-btn" class="btn btn-primary btn-full">ุงูุฒูุฏู ฺฉุดูุฑ</button>
                </div>

                <div class="admin-section">
                    <h3 class="section-subtitle">ุขูุงุฑ ฺฉุงุฑุจุฑุงู</h3>
                    <div class="system-status">
                        <div class="status-item">
                            <div class="status-header">
                                <span class="status-label">๐ฅ ุชุนุฏุงุฏ ฺฉู ฺฉุงุฑุจุฑุงู</span>
                                <span id="total-users-count" class="status-badge status-connected">0</span>
                            </div>
                            <p class="status-message">ฺฉุงุฑุจุฑุงู ุซุจุชโุดุฏู ุฏุฑ ุณุณุชู</p>
                        </div>
                    </div>
                    
                    <div style="margin-top: 16px;">
                        <h4 class="section-subtitle">ูุณุช ฺฉุงุฑุจุฑุงู</h4>
                        <div id="users-list" class="countries-list"></div>
                    </div>
                </div>

                <div class="admin-section">
                    <h3 class="section-subtitle">ฺฉุดูุฑูุง ููุฌูุฏ</h3>
                    <div id="countries-list" class="countries-list"></div>
                </div>

                <div class="admin-section">
                    <h3 class="section-subtitle">ูุฏุฑุช ุงุนูุงูุงุช</h3>
                    
                    <div class="announcement-templates" style="margin-bottom: 16px;">
                        <label class="input-label">ุชููพูุช ุขูุงุฏู</label>
                        <select id="announcement-template" class="input-field">
                            <option value="">ุงูุชุฎุงุจ ุชููพูุช...</option>
                            <option value="maintenance">๐ง ุงุนูุงู ุชุนูุฑุงุช ุณุฑูุฑ</option>
                            <option value="update">๐ ุจูโุฑูุฒุฑุณุงู ุณุฑูุณ</option>
                            <option value="new_feature">โจ ูฺฺฏ ุฌุฏุฏ</option>
                            <option value="warning">โ๏ธ ูุดุฏุงุฑ ููู</option>
                            <option value="info">โน๏ธ ุงุทูุงุนู ุนููู</option>
                        </select>
                    </div>

                    <div class="input-group">
                        <label class="input-label">ุนููุงู ุงุนูุงู</label>
                        <input type="text" id="announcement-title" class="input-field" placeholder="ุนููุงู ุงุนูุงู...">
                    </div>

                    <div class="input-group">
                        <label class="input-label">ูุชู ุงุนูุงู</label>
                        <textarea id="announcement-message" class="input-field" rows="5" placeholder="ูุชู ุงุนูุงู ุฎูุฏ ุฑุง ุงูุฌุง ุจููุณุฏ..."></textarea>
                    </div>

                    <div class="input-group">
                        <label class="input-label">ููุน ุงุนูุงู</label>
                        <select id="announcement-type" class="input-field">
                            <option value="info">ุงุทูุงุนู</option>
                            <option value="warning">ูุดุฏุงุฑ</option>
                            <option value="success">ุฎุจุฑ ุฎูุด</option>
                            <option value="error">ููู</option>
                        </select>
                    </div>

                    <button id="publish-announcement-btn" class="btn btn-primary btn-full">ุงูุชุดุงุฑ ุงุนูุงู</button>

                    <div style="margin-top: 24px;">
                        <h4 class="section-subtitle">ุงุนูุงูุงุช ููุชุดุฑ ุดุฏู</h4>
                        <div id="admin-announcements-list" class="announcements-list"></div>
                    </div>
                </div>
            </div>
        </section>

        <div id="edit-country-modal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>ูุฑุงุด ฺฉุดูุฑ</h3>
                    <button class="btn btn-ghost" onclick="adminPanel.closeEditModal()">โ</button>
                </div>
                <div class="modal-body">
                    <input type="hidden" id="edit-country-id">
                    
                    <div class="input-group">
                        <label class="input-label">ฺฉุฏ ISO ฺฉุดูุฑ</label>
                        <input type="text" id="edit-iso-code" class="input-field" placeholder="IR" maxlength="2">
                    </div>

                    <div class="input-group">
                        <label class="input-label">ูุงู ฺฉุดูุฑ (ูุงุฑุณ)</label>
                        <input type="text" id="edit-country-name" class="input-field" placeholder="ุงุฑุงู">
                    </div>

                    <div class="input-group">
                        <label class="input-label">ูุงู ฺฉุดูุฑ (ุงูฺฏูุณ)</label>
                        <input type="text" id="edit-country-name-en" class="input-field" placeholder="Iran">
                    </div>

                    <h4 class="section-subtitle" style="margin-top: 24px;">ุขุฏุฑุณโูุง IPv4</h4>
                    <div id="edit-ipv4-list" class="dns-addresses-list"></div>
                    <div class="input-group">
                        <label class="input-label">ุงูุฒูุฏู ุขุฏุฑุณ IPv4 ุฌุฏุฏ</label>
                        <div style="display: flex; gap: 8px;">
                            <input type="text" id="new-ipv4-address" class="input-field" placeholder="1.1.1.1">
                            <button class="btn btn-primary" onclick="adminPanel.addDnsAddress('ipv4')">ุงูุฒูุฏู</button>
                        </div>
                    </div>

                    <h4 class="section-subtitle" style="margin-top: 24px;">ุขุฏุฑุณโูุง IPv6</h4>
                    <div id="edit-ipv6-list" class="dns-addresses-list"></div>
                    <div class="input-group">
                        <label class="input-label">ุงูุฒูุฏู ุขุฏุฑุณ IPv6 ุฌุฏุฏ</label>
                        <div style="display: flex; gap: 8px;">
                            <input type="text" id="new-ipv6-address" class="input-field" placeholder="2606:4700:4700::1111">
                            <button class="btn btn-primary" onclick="adminPanel.addDnsAddress('ipv6')">ุงูุฒูุฏู</button>
                        </div>
                    </div>

                    <div style="display: flex; gap: 12px; margin-top: 24px;">
                        <button class="btn btn-primary" onclick="adminPanel.saveCountryEdit()">ุฐุฎุฑู ุชุบุฑุงุช</button>
                        <button class="btn btn-ghost" onclick="adminPanel.removeDuplicates()">ุญุฐู ุขุฏุฑุณโูุง ุชฺฉุฑุงุฑ</button>
                        <button class="btn btn-ghost" onclick="adminPanel.closeEditModal()">ุงูุตุฑุงู</button>
                    </div>
                </div>
            </div>
        </div>

        <footer class="footer">
            <p>ุณุฑูุณ ฺฏููฺฏ &copy; 2024</p>
        </footer>
    </div>

    <div id="toast" class="toast">
        <span id="toast-icon" class="toast-icon">โ</span>
        <span id="toast-message" class="toast-message"></span>
    </div>

    <script type="module" src="/assets/js/admin.js"></script>
</body>
</html>
